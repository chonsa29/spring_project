<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.demo.mapper.PayMapper">

	<select id="paySell" parameterType="hashmap" resultType="com.example.demo.model.Pay">
		SELECT P_NO, P_WAY
	    FROM PAY 
	    WHERE P_NO = #{pNo}
	</select>
	
	<insert id="productSell" parameterType="hashmap">
		INSERT INTO PAY
		VALUES(#{pNo}, #{pWay}, SYSDATE)
	</insert>
	
	<select id="payProductInfo" parameterType="hashmap" resultType="com.example.demo.model.Product">
		SELECT *
	    FROM PRODUCT P
	    LEFT JOIN PRODUCT_IMG I ON P.ITEM_NO = I.ITEM_NO
	    WHERE P.ITEM_NO = #{itemNo}
	</select>
	
	<select id="payMemberInfo" parameterType="map" resultType="com.example.demo.model.Member">
	    SELECT M.USERID, M.USERNAME, M.PHONE, M.ADDRESS, M.POINT, C.COUPON_NAME
	    FROM MEMBER M
	    LEFT JOIN COUPON C ON C.USERID = M.USERID AND C.IS_USED = 'N' 
	    WHERE M.USERID = '${userId}'
	</select>

	<select id="payDeliveryInfo" parameterType="hashmap" resultType="com.example.demo.model.Delivery">
		SELECT DELIVERY_NO, DELIVERY_FEE
	    FROM DELIVERY
	    WHERE DELIVERY_NO = #{deliveryNo}
	</select>
	
</mapper>




